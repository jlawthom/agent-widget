<!doctype html>

<html lang="en">

<head>
  <style>
    /* .lp_survey_header_area{
        border-bottom: none !important;
      } */
  </style>
  <script type="text/javascript" charset="utf8" src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>

  <meta charset="utf-8">

  <title>Agent Widget</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

</head>

<body style="background:rgb(19, 129, 167);">

  <h1>V0.1</h1>

  <script>

    console.log("console log");

    /**
     * 
     * INIT
     * 
     **/
    var notificationHandler = function (data) {
      // Do something with the notifications
      console.log("AGENT WIDGET SDK: " + "notificationHandler");
    };

    var focusHandler = function () {
      // Do something when the visitor is focused
      // Assume the visitor is focused to begin with
      console.log("AGENT WIDGET SDK: " + "focusHandler");
    };

    var blurHandler = function () {
      // Do something when the visitor is blurred
      // Assume the visitor is focused to begin with
      console.log("AGENT WIDGET SDK: " + "blurHandler");
    };
    lpTag.agentSDK.init({
      notificationCallback: notificationHandler,
      visitorFocusedCallback: focusHandler,
      visitorBlurredCallback: blurHandler
    });

    /**
     * 
     * GET
     * 
     **/
    var onSuccess = function (data) {
      // Do something with the returning data
      console.log("AGENT WIDGET SDK: " + "onSuccess");
      console.log(data);
    };

    var onError = function (err) {
      // Do something with the error
      console.log("AGENT WIDGET SDK: " + "onError");
    };

    var pathToData = "visitorInfo.visitorName";

    lpTag.agentSDK.get(pathToData, onSuccess, onError);


    /**
     * 
     * BIND (chatTranscript)
     * 
     **/
    var updateCallback = function (data) {
      console.log("AGENT WIDGET SDK: " + "BIND - updateCallback");
      // Do something with the returning data
      var path = data.key;
      var value = data.newValue;
      // called each time the value is updated.
      // If there's an existing value when bind is called - this callback
      // will be called with the existing value
      console.log("AGENT WIDGET SDK: " + "BIND - Path: " + path);
      console.log("AGENT WIDGET SDK: " + "BIND - value: " + value);

      var commandData = {
        text: "Some text from SDK command"
      };
      lpTag.agentSDK.command("Write ChatLine", commandData);
    };

    var notifyWhenDone = function (err) {
      console.log("AGENT WIDGET SDK: " + "BIND - notifyWhenDone");
      if (err) {
        // Do something with the error
        console.log("AGENT WIDGET SDK: " + "BIND - notifyWhenDone ERROR:" + err);
      }
      // called when the bind is completed successfully,
      // or when the action terminated with an error.
    };

    var pathToData = "chatTranscript";

    lpTag.agentSDK.bind(pathToData, updateCallback, notifyWhenDone);



  </script>


</body>

</html>